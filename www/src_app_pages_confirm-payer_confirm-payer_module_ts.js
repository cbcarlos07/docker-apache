"use strict";(self.webpackChunkzero_km=self.webpackChunkzero_km||[]).push([["src_app_pages_confirm-payer_confirm-payer_module_ts"],{1430:(R,l,r)=>{r.r(l),r.d(l,{ConfirmPayerModule:()=>L});var d=r(2816),g=r(6228),u=r(2798),e=r(3184),m=r(318),p=r(1909),h=r(6854),f=r(164),C=r(2501),P=r(4018),c=r(6362),M=r(7084),O=r(137),v=r(8527),_=r(7606);function b(o,i){if(1&o&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementStart(1,"app-warning-checkout",15),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("minHeight","50px")("fontSize","14px"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.warningMessage," ")}}const y=function(o){return{"margin-bottom":o}},S=[{path:"",component:(()=>{class o{constructor(n,t,a,s,k,D,A,z,E){this.titleS=n,this.router=t,this.route=a,this.shared=s,this.orderService=k,this.alertMsg=D,this.checkout=A,this.checkLoginService=z,this.seoService=E,this.isOrderDetails=!1,this.isSeller="seller"===localStorage.getItem("choosenView"),this.enableRefreshStatus=!1,this.userLogged=0,this.enableWarning=!1,this.enableWarningByCnh=!1,this.enableWarningBySelfie=!1,this.warningTitle="Tudo certo!",this.warningMessage="Recebemos o seu pedido, por\xe9m precisamos que o respons\xe1vel financeiro fa\xe7a o cadastro na Movida e efetue o pagamento para concluir a compra do seu ve\xedculo. O Respons\xe1vel Financeiro tem um prazo de 1 hora para concluir o pedido.",this.sub=new u.Y}ngOnInit(){this.checkLoginService.check(),this.titleS.setTitle("Zero Km - Respons\xe1vel - Sucesso"),this.seoService.createLinkForCanonicalURL(),this.user=this.shared.user,this.emailPayer=this.shared.emailPayer,this.loadPageConfigurations(),this.shared.user&&this.shared.user.PessoaID&&(this.userLogged=this.shared.user.PessoaID)}checkCreditAnalysis(){this.shared.setCounterLoading(!0),this.sub.sink=this.checkout.getCreditAnalysis(this.orderId).subscribe(t=>{if(t&&t.data){let a,s="";switch(t.data){case"Aprovado":this.shared.setCounterLoading(!1),this.verifyContract();break;case"Analise Reprovada":this.shared.setCounterLoading(!1),s="Desculpe!",a="Infelizmente voc\xea n\xe3o passou pela an\xe1lise de cr\xe9dito.",this.setAlert(s,a);break;case"Em an\xe1lise":this.shared.setCounterLoading(!1),12===this.pedido.status.id&&(s="Aguarde!",a="Seu pedido est\xe1 passando por an\xe1lise de cr\xe9dito.",this.setAlert(s,a));break;case"Processando pagamento":this.shared.setCounterLoading(!1),s="Aguarde!",a="Seu pagamento est\xe1 sendo processado.",this.setAlert(s,a);break;default:this.shared.setCounterLoading(!1),s="Aten\xe7\xe3o!",a="N\xe3o foi poss\xedvel realizar a an\xe1lise do seu pedido no momento.",this.setAlert(s,a)}}},t=>{this.shared.setCounterLoading(!1),this.alertMsg.openDialog({tipo:"message",titulo:"Aten\xe7\xe3o!",mensagem:"N\xe3o foi poss\xedvel realizar a an\xe1lise do seu pedido no momento."},"message",!0)})}setAlert(n,t){this.alertMsg.openDialog({tipo:"message",titulo:n,mensagem:t},"message",!0).then(a=>{this.sub.sink=a.afterClosed().subscribe(()=>{this.checkUserToGetOrder(!0)})})}loadPageConfigurations(){this.onDemand=this.shared.isOnDemand,this.orderId=this.route.snapshot.params.orderId;const n=this.router.url.split("?")[0];this.isOrderDetails=n.includes("assinatura/responsavel/sucesso"),this.isOrderDetails||this.isSeller?this.checkUserToGetOrder():this.checkCreditAnalysis()}checkWarning(){this.enableWarning=this.enableWarningBySelfie&&this.enableWarningByCnh}get enableDocuments(){return this.pedido&&this.pedido.status&&1!==this.pedido.status.id}verifyContract(){this.shared.setCounterLoading(!0);let n={PedidoFrotaID:parseInt(this.orderId)};this.sub.sink=this.checkout.getNewContract(n).subscribe(t=>{if(t&&t.success)return this.shared.setCounterLoading(!1),this.shared.setLoadingAtivo(!1),void this.checkUserToGetOrder();this.shared.setCounterLoading(!1),this.checkUserToGetOrder()},t=>{this.shared.setCounterLoading(!1),this.alertMsg.openDialog({tipo:"message",titulo:"Aten\xe7\xe3o!",mensagem:"N\xe3o foi poss\xedvel realizar a an\xe1lise do seu pedido no momento."},"message",!0)})}checkUserToGetOrder(n=!1){this.getOrder(!!this.isSeller||n)}getOrder(n=!1){this.shared.setCounterLoading(!0),this.sub.sink=this.orderService.getOrder(this.orderId).subscribe(t=>{if(!t)return this.shared.setCounterLoading(!1),this.alertMsg.openDialog({tipo:"message",titulo:"Algo deu errado!",mensagem:"N\xe3o foi poss\xedvel carregar as informa\xe7\xf5es do seu pedido. Tente novamente mais tarde."},"message",!0),void this.router.navigate(["/minha-conta"]);this.enableRefreshStatus=!(!t.pedido||3===t.pedido.PedidoFrotaStatusID),this.pedido=t.pedido,this.reserva=t.reserva,this.shared.setCounterLoading(!1),this.shared.setLoadingAtivo(!1),3===t.pedido.PedidoFrotaStatusID&&!localStorage.getItem("approvedStatus")&&this.alertMsg.openDialog({icon:"ok-icone.svg",tipo:"message",titulo:"Aprovado!",mensagem:"Agora \xe9 s\xf3 esperar um pouquinho que nosso time entrar\xe1 em contato para agendar a entrega do seu ve\xedculo."},"message",!0).then(a=>{this.sub.sink=a.afterClosed().subscribe(()=>{localStorage.setItem("approvedStatus","1-"+t.pedido.ReservaID)})})},t=>{this.shared.setCounterLoading(!1),this.alertMsg.openDialog({tipo:"message",titulo:"Algo deu errado!",mensagem:"N\xe3o foi poss\xedvel carregar as informa\xe7\xf5es do seu pedido. Tente novamente mais tarde."},"message",!0),this.router.navigate(["/minha-conta"])})}getSellerOrder(){this.shared.setCounterLoading(!0),this.sub.sink=this.orderService.getSellerOrder(this.orderId).subscribe(n=>{this.pedido=n,this.shared.setCounterLoading(!1)},n=>{this.shared.setCounterLoading(!1),this.alertMsg.openDialog({tipo:"message",titulo:"Algo deu errado!",mensagem:"N\xe3o foi poss\xedvel carregar as informa\xe7\xf5es do seu pedido. Tente novamente mais tarde."},"message",!0),this.router.navigate(["/minha-conta"])})}selfieUploaded(){this.enableWarningBySelfie=!0,this.enableButton=!0,this.checkWarning()}cnhUploaded(){this.enableWarningByCnh=!0,this.enableButton=!0,this.checkWarning()}ngOnDestroy(){this.shared.removeVehicleDetails(),this.sub.unsubscribe()}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(m.Title),e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(d.gz),e.\u0275\u0275directiveInject(p.b),e.\u0275\u0275directiveInject(h.p),e.\u0275\u0275directiveInject(g.z),e.\u0275\u0275directiveInject(f.Z),e.\u0275\u0275directiveInject(C.I),e.\u0275\u0275directiveInject(P.v))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-confirm-payer"]],features:[e.\u0275\u0275ProvidersFeature([g.z])],decls:30,vars:17,consts:[[1,"confirm-banner",3,"ngStyle"],[1,"container"],[1,"confirm-title"],[1,"confirm-subtitle"],[1,"card","m-t-20"],[1,"card__status","w-100"],[1,"title"],[1,"content"],[1,"status"],["alt","",3,"title"],[1,"card__reserva"],["class","container",4,"ngIf"],[3,"respFinanceiro","pedido","reserva"],[3,"pedido","reserva"],[3,"enableButton"],[3,"minHeight","fontSize"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"span",2),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",3),e.\u0275\u0275elementStart(6,"span"),e.\u0275\u0275text(7," Enviaremos todos os dados do pedido no e-mail "),e.\u0275\u0275elementStart(8,"b"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(10," e um link para acompanhar o progresso da sua compra. "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",4),e.\u0275\u0275elementStart(12,"div",5),e.\u0275\u0275elementStart(13,"label",6),e.\u0275\u0275text(14,"Status do Pedido:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"label",7),e.\u0275\u0275elementStart(16,"div",8),e.\u0275\u0275element(17,"icone-resp-fin",9),e.\u0275\u0275elementStart(18,"span"),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",10),e.\u0275\u0275elementStart(21,"label",6),e.\u0275\u0275text(22,"Pedido N\xba:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"label",7),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(25,b,3,3,"div",11),e.\u0275\u0275element(26,"br"),e.\u0275\u0275element(27,"app-pedido",12),e.\u0275\u0275element(28,"app-resume-payer",13),e.\u0275\u0275element(29,"app-termos-payer",14)),2&n&&(e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(15,y,13!==(null==t.pedido||null==t.pedido.status?null:t.pedido.status.StatusId)?"25px":"auto")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",null==t.user?null:t.user.razaosocial,", obrigado por escolher a Movida! "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.emailPayer),e.\u0275\u0275advance(6),e.\u0275\u0275styleProp("color","#F47920"),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("title",(null==t.pedido?null:t.pedido.PessoaID)!=t.userLogged&&5==(null==t.pedido||null==t.pedido.status?null:t.pedido.status.StatusId)?"An\xe1lise de fraude recusada":null==t.pedido||null==t.pedido.status?null:t.pedido.status.StatusDesc),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",(null==t.pedido?null:t.pedido.PessoaID)!=t.userLogged&&5==(null==t.pedido||null==t.pedido.status?null:t.pedido.status.StatusId)?"An\xe1lise do Cart\xe3o Rejeitada":null==t.pedido||null==t.pedido.status?null:t.pedido.status.StatusDesc," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(t.orderId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",13===(null==t.pedido||null==t.pedido.status?null:t.pedido.status.StatusId)),e.\u0275\u0275advance(2),e.\u0275\u0275property("respFinanceiro",!0)("pedido",t.pedido)("reserva",t.reserva),e.\u0275\u0275advance(1),e.\u0275\u0275property("pedido",t.pedido)("reserva",t.reserva),e.\u0275\u0275advance(1),e.\u0275\u0275property("enableButton",t.enableButton))},directives:[c.PC,M.y,c.O5,O.O,v.H,_.n],styles:[".confirm-banner[_ngcontent-%COMP%]{padding:20px 0 25px;background:#f4f4f4}.confirm-banner[_ngcontent-%COMP%]   .confirm-title[_ngcontent-%COMP%]{font-size:24px;font-family:Roboto;font-weight:500;margin-bottom:12px;line-height:28px}.confirm-banner[_ngcontent-%COMP%]   .confirm-subtitle[_ngcontent-%COMP%]{display:flex;flex-direction:column}.confirm-banner[_ngcontent-%COMP%]   .confirm-subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto;font-weight:300;line-height:20px;font-size:14px}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:3px 0 0 3px;border:none;min-height:60px;display:flex}@media (min-width: 1025px){.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{flex-direction:row}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]{width:100%}}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:14px;font-family:Roboto;font-weight:300}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:10px;font-size:24px;font-family:Roboto;font-weight:500;color:#f47920}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:8px}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{text-transform:uppercase;display:flex;outline:none;align-items:center;justify-content:center}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;text-align:center}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .sub-status[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .sub-status[_ngcontent-%COMP%]{font-size:18px;font-family:Roboto;font-weight:300;text-align:center;margin-top:10px}.confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%], .confirm-banner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:18px;font-family:Roboto;font-weight:300}.refres-button[_ngcontent-%COMP%]{padding:0 5px;border-radius:50%;outline:none;margin-left:5px;background-color:#f47920}.refres-button[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]{filter:invert(100%);margin:0!important}.refres-button[_ngcontent-%COMP%]   .reload[_ngcontent-%COMP%]:hover{opacity:.6}@media (max-width: 767px){.confirm-banner[_ngcontent-%COMP%]{display:block}.card[_ngcontent-%COMP%]{border:none}.card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #f2f2f2;flex-direction:column!important}.card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin:10px auto!important}.card[_ngcontent-%COMP%]   .card__reserva[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .card__status[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:23px}}"]}),o})()}];let I=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(S)],d.Bz]}),o})();var x=r(4466);let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[[I,c.ez,x.m]]}),o})()}}]);
//# sourceMappingURL=src_app_pages_confirm-payer_confirm-payer_module_ts.js.map