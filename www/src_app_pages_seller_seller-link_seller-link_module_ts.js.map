{"version":3,"mappings":"+LAcO,IAAMA,EAAb,MAAM,QAEFC,YAC8BC,mBAGvBC,4BACoCC,KAAKF,SAASG,iBAAiB,qBAAqB,GAC7EC,aAAa,OAAQF,KAAKF,SAASK,mDAR5CP,GAAUQ,qBAGPC,2DAHHT,EAAUU,QAAVV,EAAU,qBAFP,SAEHA,GAAb,wJCTA,MAAMW,EAAiB,CACrB,CACEC,KAAM,GACNC,UCSJ,MAAM,QASJZ,YACUa,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAPAjB,cACAA,aACAA,gBACAA,cACAA,eACAA,WACAA,yBACAA,kBAZFA,mBAAwB,EAEzBA,cAAmB,EAa1BkB,WACElB,KAAKgB,kBAAkBG,QACvBnB,KAAKiB,WAAWlB,4BAChBC,KAAKe,IAAIK,WAAW,kBAAmBpB,KAAKU,OAAOW,IAAK,2BACxDrB,KAAKsB,MAAQtB,KAAKW,MAAMY,SAASC,OAAOF,MACxCtB,KAAKyB,aAGPA,aACEzB,KAAKa,OAAOa,iBAAgB,GAC5B,IACE1B,KAAKc,QAAQa,kBAAkB3B,KAAKsB,OAAOM,UAAUN,IACnD,GAAmB,KAAfA,EAAMO,KAAa,CACrB,MAAMC,EAAWC,OAAOC,SAASF,SAC3BG,EAAUC,KAAKC,MAAMb,EAAMO,MAC3BO,EAAYF,KAAKC,MAAME,cAAmBJ,IAIhDjC,KAAKsC,WAAa,WAAWR,KAFX9B,KAAKa,OAAO0B,KAAKC,UAAY,MAAMxC,KAAKa,OAAO0B,KAAKC,aAAe,yBAEbJ,EAAUK,QAAQC,QAAQN,EAAUK,QAAQE,qBAAqB3C,KAAKsB,QAC9ItB,KAAKa,OAAOa,iBAAgB,QAE5B1B,KAAK4C,wBAGFC,GACP7C,KAAKsC,WAAa,GAElBtC,KAAKY,SAASkC,WAAW,CACvBC,KAAM,UACNC,OAAQ,mBACRC,SAJU,gEAKT,WAAW,IAIlBL,gBACM5C,KAAKkD,eACPlD,KAAKa,OAAOa,iBAAgB,GAC5B1B,KAAKkD,cAAe,EAEpBlD,KAAKY,SAASkC,WAAW,CACvBC,KAAM,WACNC,OAAQ,4BACRC,SAJU,+FAKT,WAAW,GAAME,KAAKC,IACvBA,EAAUC,cAAczB,UAAU,KAChC5B,KAAKU,OAAO4C,SAAS,CAAC,WAM9BC,SAASC,GACPxD,KAAKyD,SAAU,EACfD,EAAaE,SACb5D,SAAS6D,YAAY,QACrBH,EAAaI,kBAAkB,EAAG,GAClCC,WAAW,KACT7D,KAAKyD,SAAU,GACd,mDAhFMK,GAAmB1D,4UAAnB0D,EAAmBC,yEAFnB,CAACC,OAAsBC,8VCfpC7D,oCACEA,iCACAA,sCACEA,sCACEA,wCAAyBA,0DAAiCA,2BAC1DA,sCACEA,sCACEA,qCAEFA,2BACAA,uCACEA,0CACEA,iHAAS8D,gBAA2B9D,gCAAMA,2BAC9CA,2BACFA,2BACFA,2BACFA,2BACFA,iCAjBKA,iEAO6BA,+FACtBA,6DAG6BA,44CDM5B0D,GAAb,KDDO,IAAMK,EAAb,MAAM,sDAAOA,0GAHF,CAACC,cAAsB7D,IACtB6D,QAECD,GAAb,GGHaE,EAAb,MAAM,sDAAOA,0GARF,CACPF,MAOSE,GAAb","names":["SeoService","constructor","document","createLinkForCanonicalURL","this","querySelectorAll","setAttribute","URL","i0","DOCUMENT","factory","routes","path","component","router","route","alertMsg","shared","sellerS","gtm","checkLoginService","seoService","ngOnInit","check","addPageGTM","url","token","snapshot","params","createLink","setLoadingAtivo","recoverSellerLink","subscribe","data","hostname","window","location","payload","JSON","parse","tokenData","Crypter","sellerLink","user","VUsername","veiculo","nome","fipe","showErrorLink","err","openDialog","tipo","titulo","mensagem","triggerAlert","then","dialogRef","afterClosed","navigate","copyLink","inputElement","copying","select","execCommand","setSelectionRange","setTimeout","SellerLinkComponent","selectors","AlertMessageComponent","decls","ctx","SellerLinkRoutingModule","RouterModule","SellerLinkModule"],"sources":["./src/app/core/services/header/seo.service.ts","./src/app/pages/seller/seller-link/seller-link-routing.module.ts","./src/app/pages/seller/seller-link/seller-link.component.ts","./src/app/pages/seller/seller-link/seller-link.component.html","./src/app/pages/seller/seller-link/seller-link.module.ts"],"sourcesContent":["/**\n * @author\n * Movida S.A\n * @link \n * https://www.movida.com.br/\n * @license\n * Copyright Movida S.A All Rights Reserved.\n */\nimport { Injectable, Inject } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SeoService {\n\n    constructor(\n        @Inject(DOCUMENT) private document\n    ) { }\n\n    public createLinkForCanonicalURL(): void {\n        const canonicalLink: HTMLLinkElement = this.document.querySelectorAll('[rel=\"canonical\"]')[0];        \n        canonicalLink.setAttribute('href', this.document.URL);\n    }\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SellerLinkComponent } from './seller-link.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SellerLinkComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SellerLinkRoutingModule { }","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AlertMessageComponent } from 'src/app/shared/alert-message/alert-message.component';\nimport { MainSharedService } from 'src/app/util/shared.service';\n//import CryptoJS from 'crypto-js'\nimport { CheckLoginService } from 'src/app/core/services/checklogin.service';\nimport { SellerService } from 'src/app/core/services/seller.service';\nimport { GtmService } from 'src/app/core/services/gtm.service';\nimport { SeoService } from 'src/app/core/services/header/seo.service';\nimport { Crypter } from 'src/app/util/cripto.util';\n\n@Component({\n  selector: 'app-seller-link',\n  templateUrl: './seller-link.component.html',\n  styleUrls: ['./seller-link.component.scss'],\n  providers: [AlertMessageComponent]\n})\nexport class SellerLinkComponent implements OnInit {\n\n  public sellerLink: string;\n\n  // Page Control\n  private triggerAlert: boolean = true;\n  private token: string;\n  public copying: boolean = false;\n\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private alertMsg: AlertMessageComponent,\n    private shared: MainSharedService,\n    private sellerS: SellerService,\n    private gtm: GtmService,\n    private checkLoginService: CheckLoginService,\n    private seoService: SeoService\n  ) { }\n\n  ngOnInit() {\n    this.checkLoginService.check()\n    this.seoService.createLinkForCanonicalURL();\n    this.gtm.addPageGTM('Pageview ZeroKM', this.router.url, 'Zero Km - Link Vendedor');\n    this.token = this.route.snapshot.params.token;\n    this.createLink();\n  }\n\n  createLink() {\n    this.shared.setLoadingAtivo(true);\n    try {\n      this.sellerS.recoverSellerLink(this.token).subscribe(token => {\n        if (token.data !== \"\") {\n          const hostname = window.location.hostname;\n          const payload = JSON.parse(token.data);          \n          const tokenData = JSON.parse(Crypter.decrypter( payload))\n          \n          const username =  this.shared.user.VUsername ? `em/${this.shared.user.VUsername}/` : '';\n          \n          this.sellerLink = `https://${hostname}/${username}assinatura/detalhes/${tokenData.veiculo.nome}/${tokenData.veiculo.fipe}?linkVendedor=${this.token}`;\n          this.shared.setLoadingAtivo(false);\n        } else {\n          this.showErrorLink()\n        }\n      })\n    } catch (err) {\n      this.sellerLink = '';\n      const msg = 'Não foi possível exibir o link gerado. Tente novamente';\n      this.alertMsg.openDialog({\n        tipo: 'message',\n        titulo: 'Algo deu errado!',\n        mensagem: msg\n      }, 'message', true);\n    }\n  }\n\n  showErrorLink() {\n    if (this.triggerAlert) {\n      this.shared.setLoadingAtivo(false);\n      this.triggerAlert = false;\n      const msg = 'O link que você gerou expirou. Por favor, crie um novo link e compartilhe com o cliente.';\n      this.alertMsg.openDialog({\n        tipo: 'redirect',\n        titulo: 'Ops! Algo está errado.',\n        mensagem: msg,\n      }, 'message', true).then(dialogRef => {\n        dialogRef.afterClosed().subscribe(() => {\n          this.router.navigate(['/']);\n        });\n      });;\n    }\n  }\n\n  copyLink(inputElement) {\n    this.copying = true;\n    inputElement.select();\n    document.execCommand('copy');\n    inputElement.setSelectionRange(0, 0);\n    setTimeout(() => {\n      this.copying = false;\n    }, 500);\n  }\n}\n","<div [style.cursor]=\"copying ? 'progress' : 'default'\">\n  <div class=\"page-bg search-bar-spacer\"></div>\n  <div class=\"container\">\n    <div class=\"central-frame\">\n      <label for=\"seller-link\">Link gerado para compartilhamento</label>\n      <div class=\"seller\">\n        <div class=\"seller__link\">\n          <input id=\"seller-link\" [style.border-color]=\"copying ? '#f47920' : '#dcdcdc'\" type=\"text\"\n            [value]=\"sellerLink ? sellerLink : ''\" readonly #sellerLinkInput>\n        </div>\n        <div class=\"seller__btn\">\n          <button class=\"primary-button\" [style.cursor]=\"copying ? 'progress' : 'pointer'\"\n            (click)=\"copyLink(sellerLinkInput)\">Copiar</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { SellerLinkRoutingModule } from './seller-link-routing.module';\nimport { SellerLinkComponent } from './seller-link.component';\n\n@NgModule({\n  imports: [\n    SellerLinkRoutingModule\n  ],\n  declarations: [SellerLinkComponent],\n  schemas: [\n    CUSTOM_ELEMENTS_SCHEMA\n  ],\n})\nexport class SellerLinkModule { }"],"sourceRoot":"webpack:///","file":"src_app_pages_seller_seller-link_seller-link_module_ts.js"}