{"version":3,"mappings":"8OAKA,MAAMA,EAAiB,CACrB,CACEC,KAAM,GACNC,UCIJ,MAAM,QAMJC,YACSC,EACCC,EACAC,GAFDC,mBACCA,cACAA,gBAPHA,eAAiB,GACjBA,WAAa,GASbA,WAAuB,CAC5B,CACEC,GAAI,IACJC,MAAO,OACPC,KAAM,KAER,CACEF,GAAI,IACJC,MAAO,aACPC,KAAM,WAER,CACEF,GAAI,IACJC,MAAO,WAIXE,WACEJ,KAAKK,YAGPA,YACEL,KAAKF,OAAOQ,mBAAkB,GAC9BN,KAAKO,UAAYP,KAAKH,YAAYW,eAAeC,MAC/CC,OACEC,IACEX,KAAKF,OAAOQ,mBAAkB,GAC9B,IAAIM,GAAiB,EACrB,GAAIC,OAAOC,KAAKH,EAAOI,MAAMC,OAAS,EAAG,CACvC,MAAMC,EAAaN,EAAOI,KAAKG,IAAIC,IACZ,GAAjBA,EAAKC,WACPR,GAAiB,GAEnBO,EAAKE,MAAQF,EAAKG,aACXH,IAETnB,KAAKuB,MAAQN,EAEfjB,KAAKwB,QAAUb,EAAOa,QAElBZ,GACFZ,KAAKyB,sBAGTC,GAAM1B,KAAKF,OAAOQ,mBAAkB,KACnCqB,UAAU,IAAM3B,KAAKF,OAAOQ,mBAAkB,IAGrDmB,qBAEEzB,KAAKD,SAAS6B,WAAW,CACvBC,KAAM,gBACNC,KAAM,UACNC,OAAQ,GACRC,SALU,uNAMT,WAAW,iDAnELC,GAAcC,2JAAdD,EAAcE,4SCZ3BD,sCACEA,4CACFA,2BACAA,sCACEA,sCACEA,oCAAiBA,+BAAMA,2BACzBA,2BAEAA,sCACEA,iCACFA,2BAEAA,sCACEA,6CAMFA,2BAEFA,kCApBkBA,iEAcZA,uEAAqB,0jBDHdD,GAAb,KDIO,IAAMG,EAAb,MAAM,sDAAOA,0GAHF,CAACC,cAAsB5C,IACtB4C,QAECD,GAAb,iBGIO,IAAME,EAAb,MAAM,sDAAOA,0GAXF,CACPF,EACAG,QASSD,GAAb","names":["routes","path","component","constructor","userService","shared","alertMsg","this","id","label","link","ngOnInit","loadFines","setCounterLoading","finesInfo","getFinesInfo","pipe","tap","result","hasOverdueFine","Object","keys","data","length","finesItems","map","fine","statusId","valor","valorCobrado","fines","message","showOverdueFineMsg","ex","subscribe","openDialog","icon","tipo","titulo","mensagem","FinesComponent","i0","selectors","FinesRoutingModule","RouterModule","FinesModule","SharedModule"],"sources":["./src/app/pages/fines/fines-routing.module.ts","./src/app/pages/fines/fines.component.ts","./src/app/pages/fines/fines.component.html","./src/app/pages/fines/fines.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FinesComponent } from './fines.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FinesComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class FinesRoutingModule { }","import { Component, OnInit } from '@angular/core';\nimport { IBreadcrumb } from 'src/app/shared/breadcrumb/breadcrumb.component';\nimport { UserService } from 'src/app/core/services/user.service';\nimport { MainSharedService } from 'src/app/util/shared.service';\nimport { AlertMessageComponent } from 'src/app/shared/alert-message/alert-message.component';\nimport { tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-fines',\n  templateUrl: './fines.component.html',\n  styleUrls: ['./fines.component.scss']\n})\nexport class FinesComponent implements OnInit {\n\n  public finesInfo: any = [];\n  public fines: any = [];\n  public message: string;\n\n  constructor(\n    public userService: UserService,\n    private shared: MainSharedService,\n    private alertMsg: AlertMessageComponent,\n  ) { }\n\n  public steps: IBreadcrumb[] = [\n    {\n      id: '0',\n      label: 'Home',\n      link: '/'\n    },\n    {\n      id: '1',\n      label: 'Meu portal',\n      link: '/portal'\n    },\n    {\n      id: '2',\n      label: 'Multas'\n    }\n  ];\n\n  ngOnInit() {\n    this.loadFines();\n  }\n\n  loadFines() {\n    this.shared.setCounterLoading(true);\n    this.finesInfo = this.userService.getFinesInfo().pipe(\n      tap(\n        result => {\n          this.shared.setCounterLoading(false);\n          let hasOverdueFine = false;\n          if (Object.keys(result.data).length > 0) {\n            const finesItems = result.data.map(fine => {\n              if (fine.statusId != 2) {\n                hasOverdueFine = true;\n              }\n              fine.valor = fine.valorCobrado;\n              return fine;\n            });\n            this.fines = finesItems;\n          }\n          this.message = result.message;\n\n          if (hasOverdueFine) {\n            this.showOverdueFineMsg();\n          }\n        },\n        ex => this.shared.setCounterLoading(false)\n      )).subscribe(() => this.shared.setCounterLoading(false));\n  }\n\n  showOverdueFineMsg(): void {\n    const msg = 'As multas que estão no status de Aguardando pagamento serão debitadas em seu cartão de crédito utilizado na locação. Em caso de dúvida entrar em contato com nossa central pelo 0800 749 0029.';\n    this.alertMsg.openDialog({\n      icon: 'attention.svg',\n      tipo: 'warning',\n      titulo: '',\n      mensagem: msg\n    }, 'message', true);\n  }\n}\n","<div class=\"container first-container\">\n  <app-breadcrumb [steps]=\"steps\" class=\"steps-header\"></app-breadcrumb>\n</div>\n<div class=\"fines-header\">\n  <div class=\"container\">\n    <p class=\"title\">Multas</p>\n  </div>\n\n  <div class=\"container\">\n    <div class=\"single-line\"> </div>\n  </div>\n\n  <div class=\"container\">\n    <fines-component\n      class=\"webcomponent\"\n      [fines_items]=\"fines\"\n      [message]=\"message\"\n      image_icon=\"assets/img/icons/movida-zkm.svg\"\n    ></fines-component>\n  </div>\n\n</div>\n","//modules\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { FinesRoutingModule } from './fines-routing.module';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\n//components\nimport { FinesComponent } from './fines.component';\n\n@NgModule({\n  imports: [\n    FinesRoutingModule,\n    SharedModule,\n  ],\n  declarations: [\n    FinesComponent,\n  ],\n  schemas: [\n    CUSTOM_ELEMENTS_SCHEMA\n  ],\n})\nexport class FinesModule { }\n"],"sourceRoot":"webpack:///","file":"src_app_pages_fines_fines_module_ts.js"}